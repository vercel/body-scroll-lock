!function(o,t){"function"==typeof define&&define.amd?define(["exports"],t):"undefined"!=typeof exports?t(exports):(t(t={}),o.bodyScrollLock=t)}(this,function(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function i(o){return o=o||window.event,!!p(o.target)||1<o.touches.length||(o.preventDefault&&o.preventDefault(),!1)}function o(){void 0!==w&&(window.top.document.body.style.paddingRight=w,w=void 0),void 0!==u&&(window.top.document.body.style.overflow=u,u=void 0)}function e(){var o,t;void 0!==a&&(o=-parseInt(window.top.document.body.style.top,10),t=-parseInt(window.top.document.body.style.left,10),window.top.document.body.style.position=a.position,window.top.document.body.style.top=a.top,window.top.document.body.style.left=a.left,window.scrollTo(t,o),a=void 0)}var t,d=!1,l=("undefined"!=typeof window&&(window.addEventListener("testPassive",null,t={get passive(){d=!0}}),window.removeEventListener("testPassive",null,t)),"undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)),r=[],c=!1,s=-1,u=void 0,a=void 0,w=void 0,p=function(t){return r.some(function(o){return!(!o.options.allowTouchMove||!o.options.allowTouchMove(t))})};exports.disableBodyScroll=function(n,o){var t;n?r.some(function(o){return o.targetElement===n})||(t={targetElement:n,options:o||{}},r=[].concat(function(o){if(Array.isArray(o)){for(var t=0,e=Array(o.length);t<o.length;t++)e[t]=o[t];return e}return Array.from(o)}(r),[t]),l?window.requestAnimationFrame(function(){var o,t,e;void 0===a&&(a={position:window.top.document.body.style.position,top:window.top.document.body.style.top,left:window.top.document.body.style.left},t=(o=window).scrollY,e=o.scrollX,o.innerHeight,window.top.document.body.style.position="fixed",window.top.document.body.style.top=-t+"px",window.top.document.body.style.left=-e+"px")}):(t=o,void 0===w&&(t=!!t&&!0===t.reserveScrollBarGap,o=window.innerWidth-document.documentElement.clientWidth,t)&&0<o&&(t=parseInt(window.getComputedStyle(window.top.document.body).getPropertyValue("padding-right"),10),w=window.top.document.body.style.paddingRight,window.top.document.body.style.paddingRight=t+o+"px"),void 0===u&&(u=window.top.document.body.style.overflow,window.top.document.body.style.overflow="hidden")),l&&(n.ontouchstart=function(o){1===o.targetTouches.length&&(s=o.targetTouches[0].clientY)},n.ontouchmove=function(o){var t,e;1===o.targetTouches.length&&(t=n,e=(o=o).targetTouches[0].clientY-s,p(o.target)||(t&&0===t.scrollTop&&0<e||!!(t=t)&&t.scrollHeight-t.scrollTop<=t.clientHeight&&e<0?i(o):o.stopPropagation()))},c||(document.addEventListener("touchmove",i,d?{passive:!1}:void 0),c=!0))):console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},exports.clearAllBodyScrollLocks=function(){l&&(r.forEach(function(o){o.targetElement.ontouchstart=null,o.targetElement.ontouchmove=null}),c&&(document.removeEventListener("touchmove",i,d?{passive:!1}:void 0),c=!1),s=-1),(l?e:o)(),r=[]},exports.enableBodyScroll=function(t){t?(r=r.filter(function(o){return o.targetElement!==t}),l&&(t.ontouchstart=null,t.ontouchmove=null,c)&&0===r.length&&(document.removeEventListener("touchmove",i,d?{passive:!1}:void 0),c=!1),(l?e:o)()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")}});
